<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Page Title -->
    <title>Imagine music sample</title>

    <!-- turretcss CSS -->
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/turretcss/dist/turretcss.min.css" crossorigin="anonymous">
  </head>
  <body>
    <h1>Imagine music sample</h1>
    <video
        controls
        id="sample-video"
        loop
    >
    <source
      src="./assets/test-video.mp4"
      type="video/mp4"
    >
    <track
      default
      kind="captions"
      src="./assets/test-video.vtt"
      srclang="en"
      label="BeatCaps"
    >
  </video>
  <div id="state"></div>
  <p>Notes: captions are funky when loading locally. Easiest thing is to push to git or use <a href="https://ngrok.com/">ngrok</a> for testing. Copies of this demo can only be used with permission from Beatcaps staff from Communote Inc. Technologies in this demo may be protected under patent. This demo allows a non-commercial license for limited personal use.</p>
  </body>
  <script src="listener.js"></script>
  <script src="vibrate.js"></script>
  <script>
    let vidEl = {}
    const showCue = function(timestamp) {
        // TODO: start effect
      // document.getElementById('history').innerHTML += (timestamp + 'ms: show<br>')
      startPersistentVibrate()
    }
    const hideCue = function(timestamp) {
        // TODO: stop effect
      // document.getElementById('history').innerHTML += (timestamp + 'ms: hide<br>')
      stopVibrate()
    }
    window.onload = function() {
      vidEl = document.getElementById('sample-video')
      closedCaptionsListener(vidEl, showCue, hideCue)
    }
  </script>
</html>
